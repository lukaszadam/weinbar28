---
import { getCollection } from 'astro:content';
import MainLayout from '../../layouts/MainLayout.astro';

export async function getStaticPaths() {
  const blogEntries = await getCollection('blog');
  return blogEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<MainLayout
    title={`${entry.data.title} - Weinbar38`}
    description={entry.data.description}
>
    <article class="article">
        <header class="article-header">
            <div class="container-narrow">
                <a href="/#artikel" class="article-back">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M15 10H5M5 10L10 15M5 10L10 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Zurück zu den Artikeln</span>
                </a>
                <div class="article-meta">
                    <span class="article-tag">{entry.data.category}</span>
                    <span class="article-date">{entry.data.pubDate.toLocaleDateString('de-DE', { day: 'numeric', month: 'long', year: 'numeric' })}</span>
                    <span class="article-read-time">{entry.data.readTime}</span>
                </div>
                <h1 class="article-title">{entry.data.title}</h1>
                <p class="article-subtitle">
                    {entry.data.description}
                </p>
                <div class="article-author">
                    <div class="author-avatar">W38</div>
                    <div class="author-info">
                        <div class="author-name">Weinbar38 Redaktion</div>
                        <div class="author-title">Weinkenner & Geschichtenerzähler</div>
                    </div>
                </div>
            </div>
        </header>

        <div class="article-featured-image">
            <div class="image-placeholder article-image">
                <svg width="120" height="120" viewBox="0 0 120 120" fill="none">
                    <path d="M30 20H90V80H30V20Z" stroke="currentColor" stroke-width="2" opacity="0.3"/>
                    <path d="M40 40L80 80M80 40L40 80" stroke="currentColor" stroke-width="2" opacity="0.2"/>
                    <circle cx="60" cy="60" r="30" stroke="currentColor" stroke-width="2" opacity="0.15"/>
                </svg>
            </div>
        </div>

        <div class="article-content">
            <div class="container-narrow">
                <div class="article-body">
                    <Content />

                    <div class="article-divider">
                        <span>◆</span>
                    </div>

                    <div class="article-footer-info">
                        <h3>Über Weinbar38</h3>
                        <p>
                            Wir schreiben über Weinkultur, Genuss und die Region Wiesbaden. Jeden Samstag
                            veröffentlichen wir neue Artikel, die Sie auf eine kulinarische Reise mitnehmen.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </article>
</MainLayout>
